"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Dust=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PIXI;if(_classCallCheck(this,e),void 0===t)throw new Error("Please assign a rendering engine in the constructor before using pixiDust.js");this.renderer="",t.ParticleContainer&&(this.Container=t.Container,this.renderer="pixi"),this.globalParticles=[]}return _createClass(e,[{key:"randomFloat",value:function(e,t){return e+Math.random()*(t-e)}},{key:"randomInt",value:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}},{key:"create",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return console.log("Sprite creation function")},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return new y.Container},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:6.28,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:4,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:16,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:.3,v=arguments.length>12&&void 0!==arguments[12]?arguments[12]:3,u=arguments.length>13&&void 0!==arguments[13]?arguments[13]:.01,g=arguments.length>14&&void 0!==arguments[14]?arguments[14]:.05,f=arguments.length>15&&void 0!==arguments[15]?arguments[15]:.02,p=arguments.length>16&&void 0!==arguments[16]?arguments[16]:.02,y=this,m=arguments.length>17&&void 0!==arguments[17]?arguments[17]:.01,b=arguments.length>18&&void 0!==arguments[18]?arguments[18]:.03,C=[];this.globalParticles.push(C);for(var P=[],S=void 0,x=(s-r)/(i-1),k=0;k<i;k++)l?(S=this.randomFloat(r,s),P.push(S)):(void 0===S&&(S=r),P.push(S),S+=x);var F=function(i){var l=n();l.totalFrames>0&&l.gotoAndStop(y.randomInt(0,l.totalFrames-1));var r=y.randomInt(h,c);l.width=r,l.height=r,l.anchor.set(.5,.5),l.x=e,l.y=t,l.scaleSpeed=y.randomFloat(u,g),l.alphaSpeed=y.randomFloat(f,p),l.rotationSpeed=y.randomFloat(m,b);var s=y.randomFloat(d,v);l.vx=s*Math.cos(i),l.vy=s*Math.sin(i),C.push(l),a.addChild(l),l.updateParticle=function(){l.vy+=o,l.x+=l.vx,l.y+=l.vy,l.scale.x-l.scaleSpeed>0&&(l.scale.x-=l.scaleSpeed),l.scale.y-l.scaleSpeed>0&&(l.scale.y-=l.scaleSpeed),l.rotation+=l.rotationSpeed,l.alpha-=l.alphaSpeed,l.alpha<=0&&(a.removeChild(l),C.splice(C.indexOf(l),1))}};return P.forEach(function(e){return F(e)}),C}},{key:"emitter",value:function(e,t){function n(){o.playing||(t(),l=setInterval(i.bind(this),e),o.playing=!0)}function a(){o.playing&&(clearInterval(l),o.playing=!1)}function i(){t()}var o={},l=void 0;return o.playing=!1,o.play=n,o.stop=a,o}},{key:"update",value:function(){if(this.globalParticles.length>0)for(var e=this.globalParticles.length-1;e>=0;e--){var t=this.globalParticles[e];if(t.length>0)for(var n=t.length-1;n>=0;n--){var a=t[n];a.updateParticle()}else this.globalParticles.splice(this.globalParticles.indexOf(t),1)}}}]),e}();